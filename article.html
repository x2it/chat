<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Daviçš„ä¸ªäººæ€è€ƒç©ºé—´ - è®°å½•åœ¨AIä¸Web3æ—¶ä»£çš„è§‚å¯Ÿã€å®è·µä¸åæ€">
    <title>æ–‡ç« è¯¦æƒ… - Daviçš„è·µè¡Œç¬”è®°</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        .article-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem 1rem;
            line-height: 1.8;
            font-size: 1.05rem;
        }
        .article-content h1 {
            font-size: 2.2rem;
            margin-bottom: 1rem;
            color: var(--dark-color);
        }
        .article-meta {
            color: var(--text-light);
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--gray-border);
        }
        .article-content img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin: 1.5rem 0;
        }
        .article-content h2 {
            font-size: 1.8rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            color: var(--dark-color);
        }
        .article-content h3 {
            font-size: 1.4rem;
            margin-top: 1.5rem;
            margin-bottom: 0.8rem;
            color: var(--dark-color);
        }
        .article-content p {
            margin-bottom: 1.2rem;
            color: var(--text-primary);
        }
        .article-content ul,
        .article-content ol {
            margin-bottom: 1.2rem;
            padding-left: 1.5rem;
        }
        .article-content li {
            margin-bottom: 0.5rem;
        }
        .article-content blockquote {
            border-left: 4px solid var(--primary-color);
            padding-left: 1rem;
            margin: 1.5rem 0;
            color: var(--text-secondary);
            font-style: italic;
        }
        .article-content code {
            background: var(--gray-light);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.9em;
        }
        .article-content pre {
            background: var(--gray-light);
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1.5rem 0;
        }
        .article-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <header>
        <h1 class="blog-title">Daviçš„è·µè¡Œç¬”è®°</h1>
        <p class="blog-subtitle">è®°å½•åœ¨AIä¸Web3æ—¶ä»£çš„è§‚å¯Ÿã€å®è·µä¸åæ€</p>
        
        <div class="nav-container">
            <div class="nav-tabs">
                <a href="index.html#about" class="nav-tab">å…³äºæˆ‘</a>
                <a href="index.html#thinking" class="nav-tab active">è¿‘æœŸæ€è€ƒ</a>
                <a href="index.html#projects" class="nav-tab">åœ¨åšçš„äº‹</a>
                <a href="index.html#contact" class="nav-tab">è”ç³»äº¤æµ</a>
            </div>
        </div>
    </header>

    <section id="article-detail">
        <div class="article-content" id="article-container">
            <!-- æ–‡ç« å†…å®¹å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
            <p style="text-align: center; color: var(--text-secondary); padding: 2rem;">åŠ è½½ä¸­...</p>
        </div>
    </section>

    <div class="footer-links">
        <a href="https://w3b.pub/blog.html" class="footer-link" title="è®¿é—®ä¸ªäººåšå®¢">ç†ä¼š</a>
        <span class="link-divider">|</span>
        <a href="https://w3b.pub" class="footer-link" title="æµè§ˆå†…å®¹ç›®å½•">è·µè¡Œ</a>
    </div>

    <footer>
        <p>åœ¨å˜åŒ–ä¸­å¯»æ‰¾ä¸å˜ï¼Œåœ¨ç¹æ‚ä¸­ä¿æŒç®€å•ã€‚</p>
        <p class="copyright">Â© 2026 Davi iHome Studio</p>
    </footer>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <div class="back-to-top" id="backToTop" title="è¿”å›é¡¶éƒ¨">â†‘</div>
    <script src="assets/js/main.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // è·å–URLå‚æ•°ä¸­çš„æ–‡ç« ID
            const urlParams = new URLSearchParams(window.location.search);
            const articleId = urlParams.get('id');

            if (!articleId) {
                document.getElementById('article-container').innerHTML = `
                    <div style="text-align: center; color: var(--text-secondary); padding: 4rem;">
                        <h2>æ–‡ç« ä¸å­˜åœ¨</h2>
                        <p>è¯·æä¾›æœ‰æ•ˆçš„æ–‡ç« ID</p>
                        <a href="index.html" class="footer-link" style="display: inline-block; margin-top: 1rem;">è¿”å›é¦–é¡µ</a>
                    </div>
                `;
                return;
            }

            // åŠ è½½æ–‡ç« æ•°æ®
            async function loadArticle() {
                const container = document.getElementById('article-container');

                try {
                    // æ£€æµ‹æ˜¯å¦åœ¨æœ¬åœ°æ–‡ä»¶åè®®ä¸‹
                    const isLocalFile = window.location.protocol === 'file:';
                    
                    let article = null;
                    
                    if (isLocalFile) {
                        // æœ¬åœ°æ¨¡å¼ï¼šä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
                        console.log('æœ¬åœ°æ–‡ä»¶æ¨¡å¼ï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®');
                        const mockArticles = [
                            {
                                id: '1',
                                fields: {
                                    åˆ†ç±»: 'åšå®¢',
                                    æ ‡é¢˜: 'AIå¦‚ä½•çœŸæ­£å¸®åŠ©åˆ›ä½œ',
                                    å‘å¸ƒæ—¶é—´: '2026-02-18',
                                    å†…å®¹: '# AIå¦‚ä½•çœŸæ­£å¸®åŠ©åˆ›ä½œ\n\nåœ¨å½“å‰çš„æŠ€æœ¯ç¯å¢ƒä¸­ï¼ŒAIå·²ç»æˆä¸ºäº†åˆ›ä½œè¿‡ç¨‹ä¸­çš„é‡è¦å·¥å…·ã€‚\n\n## åˆ›ä½œè¾…åŠ©\n\nAIå¯ä»¥å¸®åŠ©æˆ‘ä»¬ï¼š\n- ç”Ÿæˆåˆ›æ„çµæ„Ÿ\n- è¾…åŠ©ä¿®æ”¹å’Œç¼–è¾‘\n- æä¾›ç›¸å…³èµ„æ–™\n\n## ä¸è¦æ›¿ä»£åˆ›ä½œ\n\né‡è¦çš„æ˜¯ï¼ŒAIåº”è¯¥æ˜¯åˆ›ä½œçš„è¾…åŠ©å·¥å…·ï¼Œè€Œä¸æ˜¯æ›¿ä»£åˆ›ä½œè€…çš„è§’è‰²ã€‚' 
                                }
                            },
                            {
                                id: '2',
                                fields: {
                                    åˆ†ç±»: 'åšå®¢',
                                    æ ‡é¢˜: 'æ·±åº¦æ€è€ƒçš„é‡è¦æ€§',
                                    å‘å¸ƒæ—¶é—´: '2026-02-17',
                                    å†…å®¹: '# æ·±åº¦æ€è€ƒçš„é‡è¦æ€§\n\nåœ¨ä¿¡æ¯çˆ†ç‚¸çš„æ—¶ä»£ï¼Œæ·±åº¦æ€è€ƒå˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚\n\n## ä¿¡æ¯è¿‡è½½\n\næˆ‘ä»¬æ¯å¤©éƒ½ä¼šæ¥æ”¶åˆ°å¤§é‡çš„ä¿¡æ¯ï¼Œå¦‚ä½•ä»ä¸­ç­›é€‰å‡ºæœ‰ä»·å€¼çš„å†…å®¹ï¼Œéœ€è¦æ·±åº¦æ€è€ƒã€‚\n\n## ç‹¬ç«‹åˆ¤æ–­\n\næ·±åº¦æ€è€ƒå¸®åŠ©æˆ‘ä»¬å½¢æˆç‹¬ç«‹çš„åˆ¤æ–­ï¼Œä¸è¢«å¤–ç•Œçš„å™ªéŸ³æ‰€å¹²æ‰°ã€‚' 
                                }
                            }
                        ];
                        
                        // æ‰¾åˆ°IDåŒ¹é…çš„æ–‡ç« 
                        article = mockArticles.find(item => {
                            return item.id === articleId;
                        });
                    } else {
                        // åœ¨çº¿æ¨¡å¼ï¼šä» Cloudflare Worker è·å–æ•°æ®
                        const response = await fetch('https://chat.x-dw.workers.dev');
                        
                        // æ£€æŸ¥å“åº”çŠ¶æ€
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        
                        const data = await response.json();
                        
                        // éªŒè¯æ•°æ®æ ¼å¼
                        if (!Array.isArray(data)) {
                            throw new Error('æ•°æ®æ ¼å¼é”™è¯¯ï¼šæœŸæœ›æ•°ç»„');
                        }
                        
                        // æ‰¾åˆ°IDåŒ¹é…çš„æ–‡ç« 
                        article = data.find(item => {
                            return item.id === articleId || item.record_id === articleId;
                        });
                    }
                    
                    if (!article) {
                        container.innerHTML = `
                            <div style="text-align: center; color: var(--text-secondary); padding: 4rem;">
                                <h2>æ–‡ç« ä¸å­˜åœ¨</h2>
                                <p>æœªæ‰¾åˆ°IDä¸º ${articleId} çš„æ–‡ç« </p>
                                <a href="index.html" class="footer-link" style="display: inline-block; margin-top: 1rem;">è¿”å›é¦–é¡µ</a>
                            </div>
                        `;
                        return;
                    }
                    
                    const fields = article.fields;
                    
                    // è®¾ç½®é¡µé¢æ ‡é¢˜
                    document.title = `${fields.æ ‡é¢˜ || 'æ— æ ‡é¢˜'} - Daviçš„è·µè¡Œç¬”è®°`;
                    
                    // æ¸²æŸ“æ–‡ç« å†…å®¹
                    const contentHtml = fields.å†…å®¹ ? marked.parse(fields.å†…å®¹) : 'æ— å†…å®¹';
                    
                    // å¤„ç†å°é¢å›¾ç‰‡
                    let coverImage = '';
                    if (fields.å°é¢ && Array.isArray(fields.å°é¢) && fields.å°é¢.length > 0 && fields.å°é¢[0].url) {
                        coverImage = `<img src="${fields.å°é¢[0].url}" alt="${fields.æ ‡é¢˜ || 'å°é¢'}" style="max-width:100%; height:auto; margin-bottom: 1.5rem;">`;
                    }
                    
                    // ä¿å­˜æ–‡ç« æ•°æ®åˆ°å…¨å±€å˜é‡
                    window.currentArticle = {
                        title: fields.æ ‡é¢˜ || 'æ— æ ‡é¢˜',
                        content: fields.å†…å®¹ || ''
                    };
                    
                    container.innerHTML = `
                        ${coverImage}
                        <h1>${fields.æ ‡é¢˜ || 'æ— æ ‡é¢˜'}</h1>
                        <div class="article-meta">
                            <span>å‘å¸ƒæ—¶é—´ï¼š${formatDate(fields.å‘å¸ƒæ—¶é—´)}</span>
                            ${fields.åˆ†ç±» ? `<span style="margin-left: 1.5rem;">åˆ†ç±»ï¼š${fields.åˆ†ç±»}</span>` : ''}
                        </div>
                        <div style="margin-bottom: 2rem;">
                            <button id="downloadMdBtn" style="background: transparent; border: none; color: var(--primary-color); text-decoration: none; font-weight: bold; cursor: pointer; font-size: 1rem; display: inline-flex; align-items: center; gap: 0.5rem;">
                                ğŸ“¥ ä¸‹è½½ Markdown
                            </button>
                        </div>
                        <div class="article-body">
                            ${contentHtml}
                        </div>
                    `;
                    
                    // æ·»åŠ ä¸‹è½½æŒ‰é’®ç‚¹å‡»äº‹ä»¶
                    document.getElementById('downloadMdBtn').addEventListener('click', function() {
                        if (!window.currentArticle) {
                            alert('æš‚æ— æ–‡ç« æ•°æ®');
                            return;
                        }
                        
                        const { title, content } = window.currentArticle;
                        
                        // ç”Ÿæˆæ–‡ä»¶åï¼šå°†æ ‡é¢˜ä¸­çš„éæ³•å­—ç¬¦æ›¿æ¢ä¸ºä¸‹åˆ’çº¿
                        const fileName = title.replace(/[\\/:*?"<>|]/g, '_') + '.md';
                        
                        // åˆ›å»º Blob
                        const blob = new Blob([content], { type: 'text/markdown' });
                        
                        // ç”Ÿæˆä¸‹è½½é“¾æ¥
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = fileName;
                        
                        // æ¨¡æ‹Ÿç‚¹å‡»ä¸‹è½½
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        
                        // é‡Šæ”¾ URL å¯¹è±¡
                        URL.revokeObjectURL(url);
                    });
                } catch (error) {
                    console.error('åŠ è½½æ–‡ç« å¤±è´¥:', error);
                    container.innerHTML = `
                        <div style="text-align: center; color: var(--text-secondary); padding: 4rem;">
                            <h2>åŠ è½½å¤±è´¥</h2>
                            <p>è¯·ç¨åé‡è¯•</p>
                            <p style="font-size: 0.9rem; margin-top: 0.5rem;">é”™è¯¯ä¿¡æ¯: ${error.message}</p>
                            <a href="index.html" class="footer-link" style="display: inline-block; margin-top: 1rem;">è¿”å›é¦–é¡µ</a>
                        </div>
                    `;
                }
            }

            // æ ¼å¼åŒ–æ—¥æœŸ
            function formatDate(dateString) {
                if (!dateString) return 'æœªçŸ¥æ—¥æœŸ';
                
                const date = new Date(dateString);
                
                // æ£€æŸ¥æ—¥æœŸæ˜¯å¦æœ‰æ•ˆ
                if (isNaN(date.getTime())) {
                    return 'æ—¥æœŸæ ¼å¼é”™è¯¯';
                }
                
                const year = date.getFullYear();
                const month = (date.getMonth() + 1).toString().padStart(2, '0');
                const day = date.getDate().toString().padStart(2, '0');
                
                return `${year}-${month}-${day}`;
            }

            // åˆå§‹åŒ–åŠ è½½
            loadArticle();
        });
    </script>
</body>
</html>